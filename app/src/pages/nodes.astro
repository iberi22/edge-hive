---
import AdminLayout from '../layouts/AdminLayout.astro';
import NodeList from '../components/dashboard/NodeList.svelte';
import GemBlock from '../components/ui/GemBlock.svelte';
import Card from '../components/ui/Card.svelte';
import Button from '../components/ui/Button.svelte';
import { nodes } from '../stores/dashboard';
---
<AdminLayout>
  <div class="space-y-6">
    <div class="flex justify-between items-center">
      <div>
        <h1 class="text-2xl font-bold text-textHeading font-sans tracking-tight">Nodes Manager</h1>
        <p class="text-muted mt-1 font-sans">Manage your distributed edge nodes.</p>
      </div>
      <Button variant="primary">
        <span class="mr-2">+</span> Add Node
      </Button>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <div class="lg:col-span-2">
        <NodeList client:load nodes={[]} /> <!-- Pass empty or store data -->
      </div>
      <div class="space-y-6">
        <GemBlock title="Optimization">
          Distribute workloads across nodes with high CPU availability to maximize cluster efficiency.
        </GemBlock>
        
        <Card title="Cluster Health" hud={true}>
           <div class="flex items-center gap-4 mb-4">
             <div class="w-16 h-16 rounded-full border-4 border-success/20 flex items-center justify-center relative">
               <span class="text-success font-bold text-xl">98%</span>
               <div class="absolute inset-0 border-4 border-success border-t-transparent rounded-full animate-spin"></div>
             </div>
             <div>
               <p class="text-textHeading font-medium">All Systems Operational</p>
               <p class="text-muted text-sm">3/3 Nodes Online</p>
             </div>
           </div>
        </Card>
      </div>
    </div>
  </div>
</AdminLayout>
